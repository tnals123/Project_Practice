<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>hljs.initHighlightingOnLoad();</script>

</head>

<script>

        function update_code() {
            const result_elem = document.querySelector("#highlighting-code code");
            const text = document.querySelector("#editing-code").value;
            let html = hljs.highlightAuto(text).value;
            console.log(html);
            result_elem.innerHTML =  html.replace(new RegExp("  ", "g"), "&nbsp; ");;
        }

        function resize() {
            const editor = document.querySelector('#editing-code');
            editor.style.height = "20px";
            editor.style.height = (editor.scrollHeight + 5)+"px";
        }

        document.addEventListener("DOMContentLoaded", () => {
            update_code();
            resize();
            });

        function block(){
            var transe = document.getElementById("editing-code");
            var blocking = document.getElementById("highlighting-code");
            blocking.style.display = "block";
            transe.style.backgroundColor = "transparent";
            transe.style.outline = "none";
            transe.style.border = "none";
        }





    </script>

<body>
<div style="height: 300px;">
        <textarea
                id="editing-code"
                cols="80"
                placeholder="소스코드 입력"
                spellcheck="false"
                style="max-height: 300px; width:600px; top: 10px; resize: none; overflow: scroll; "
                onclick="block();update_code(); resize();"
                oninput="update_code(); resize();">
# 클릭 시 코드창이 뜹니다. 바로 입력해 주세요

print('Hello, world!')
        </textarea>
</div>
<pre
        style="height:300px;width:600px; display: none; position: absolute; top: 0;"
        id="highlighting-code"
        class="hljs">
  <code></code>
</pre>


</body>
</html>